I"Ôi<h3 id="dbus-iÌ‡le-giÌ‡ren-usb-bellekleriÌ‡-tespiÌ‡t-etme">DBUS Ä°LE GÄ°REN USB BELLEKLERÄ° TESPÄ°T ETME</h3>

<p>YukarÄ±daki yazÄ±lardan dbus Ä±n matÄ±ÄŸÄ±nÄ± az Ã§ok anladÄ±nÄ±z.</p>

<p>Ben ilk olarak kodlarÄ± vereyim.</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">dbus</span>

<span class="n">__all__</span> <span class="o">=</span> <span class="p">(</span><span class="s">"getAllUnixDevices"</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">getAllUnixDevices</span><span class="p">():</span>
    <span class="n">busSession</span> <span class="o">=</span> <span class="n">dbus</span><span class="p">.</span><span class="n">SessionBus</span><span class="p">()</span>
    <span class="n">obj</span> <span class="o">=</span> <span class="n">busSession</span><span class="p">.</span><span class="n">get_object</span><span class="p">(</span><span class="s">"org.gtk.vfs.UDisks2VolumeMonitor"</span><span class="p">,</span> <span class="s">"/org/gtk/Private/RemoteVolumeMonitor"</span><span class="p">)</span>
    <span class="n">iface</span> <span class="o">=</span> <span class="n">dbus</span><span class="p">.</span><span class="n">Interface</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s">"org.gtk.Private.RemoteVolumeMonitor"</span><span class="p">)</span>
    <span class="n">_listdevice_</span> <span class="o">=</span> <span class="n">iface</span><span class="p">.</span><span class="n">List</span><span class="p">()</span>
    <span class="n">devices</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">_listdevice_</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">i</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">j</span><span class="p">,</span> <span class="n">dbus</span><span class="p">.</span><span class="n">Dictionary</span><span class="p">):</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="c1">#FIXME How do is select USB devices better without third party?
</span>                    
                    <span class="n">path</span> <span class="o">=</span> <span class="n">deviceList</span><span class="p">(</span><span class="s">"/org/freedesktop/UDisks2/block_devices/"</span><span class="o">+</span><span class="n">j</span><span class="p">[</span><span class="s">"unix-device"</span><span class="p">].</span><span class="n">lstrip</span><span class="p">(</span><span class="s">"/dev/"</span><span class="p">))</span>
                    <span class="n">result</span> <span class="o">=</span> <span class="n">findUSBDevices</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
                        <span class="n">size</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">Get</span><span class="p">(</span><span class="s">"org.freedesktop.UDisks2.Drive"</span><span class="p">,</span> <span class="s">"Size"</span><span class="p">)</span>
                        <span class="k">if</span> <span class="n">size</span> <span class="o">&gt;=</span> <span class="mi">10</span><span class="o">**</span><span class="mi">12</span><span class="p">:</span>
                            <span class="n">size</span> <span class="o">=</span> <span class="s">"%.0fTB"</span> <span class="o">%</span> <span class="nb">round</span><span class="p">(</span><span class="n">size</span> <span class="o">/</span> <span class="mi">10</span><span class="o">**</span><span class="mi">12</span><span class="p">)</span>
                        <span class="k">elif</span> <span class="n">size</span> <span class="o">&gt;=</span> <span class="mi">10</span><span class="o">**</span><span class="mi">9</span><span class="p">:</span>
                            <span class="n">size</span> <span class="o">=</span> <span class="s">"%.0fGB"</span> <span class="o">%</span> <span class="nb">round</span><span class="p">(</span><span class="n">size</span> <span class="o">/</span> <span class="mi">10</span><span class="o">**</span><span class="mi">9</span><span class="p">)</span>
                        <span class="k">elif</span> <span class="n">size</span> <span class="o">&gt;=</span> <span class="mi">10</span><span class="o">**</span><span class="mi">6</span><span class="p">:</span>
                            <span class="n">size</span> <span class="o">=</span> <span class="s">"%.0fMB"</span> <span class="o">%</span> <span class="nb">round</span><span class="p">(</span><span class="n">size</span> <span class="o">/</span> <span class="mi">10</span><span class="o">**</span><span class="mi">6</span><span class="p">)</span>
                        <span class="k">elif</span> <span class="n">size</span> <span class="o">&gt;=</span> <span class="mi">10</span><span class="o">**</span><span class="mi">3</span><span class="p">:</span>
                            <span class="n">size</span> <span class="o">=</span> <span class="s">"%.0fkB"</span> <span class="o">%</span> <span class="nb">round</span><span class="p">(</span><span class="n">size</span> <span class="o">/</span> <span class="mi">10</span><span class="o">**</span><span class="mi">3</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">size</span> <span class="o">=</span> <span class="s">"%.0fB"</span> <span class="o">%</span> <span class="nb">round</span><span class="p">(</span><span class="n">size</span><span class="p">)</span>
                        <span class="n">devices</span><span class="p">.</span><span class="n">append</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">Get</span><span class="p">(</span><span class="s">"org.freedesktop.UDisks2.Drive"</span><span class="p">,</span> <span class="s">"Vendor"</span><span class="p">))</span><span class="o">+</span><span class="s">" "</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">Get</span><span class="p">(</span><span class="s">"org.freedesktop.UDisks2.Drive"</span><span class="p">,</span> <span class="s">"Model"</span><span class="p">))</span><span class="o">+</span><span class="s">" "</span><span class="o">+</span><span class="n">size</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">j</span><span class="p">[</span><span class="s">"unix-device"</span><span class="p">]),</span> <span class="n">result</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">Get</span><span class="p">(</span><span class="s">"org.freedesktop.UDisks2.Drive"</span><span class="p">,</span> <span class="s">"Size"</span><span class="p">)])</span>
                        
                <span class="k">except</span> <span class="nb">KeyError</span><span class="p">:</span>
                    <span class="k">pass</span>
    <span class="k">return</span> <span class="n">devices</span>
        
    
<span class="k">def</span> <span class="nf">deviceList</span><span class="p">(</span><span class="n">objectPath</span><span class="p">):</span>
    <span class="n">busSys</span> <span class="o">=</span> <span class="n">dbus</span><span class="p">.</span><span class="n">SystemBus</span><span class="p">()</span>
    <span class="n">obj</span> <span class="o">=</span> <span class="n">busSys</span><span class="p">.</span><span class="n">get_object</span><span class="p">(</span><span class="s">"org.freedesktop.UDisks2"</span><span class="p">,</span> <span class="n">objectPath</span><span class="p">)</span>
    <span class="n">iface</span> <span class="o">=</span> <span class="n">dbus</span><span class="p">.</span><span class="n">Interface</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s">"org.freedesktop.DBus.Properties"</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">iface</span><span class="p">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"org.freedesktop.UDisks2.Block"</span><span class="p">,</span> <span class="s">"Drive"</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">findUSBDevices</span><span class="p">(</span><span class="n">objectPath</span><span class="p">):</span>
    <span class="n">busSys</span> <span class="o">=</span> <span class="n">dbus</span><span class="p">.</span><span class="n">SystemBus</span><span class="p">()</span>
    <span class="n">obj</span> <span class="o">=</span> <span class="n">busSys</span><span class="p">.</span><span class="n">get_object</span><span class="p">(</span><span class="s">"org.freedesktop.UDisks2"</span><span class="p">,</span> <span class="n">objectPath</span><span class="p">)</span>
    <span class="n">iface</span> <span class="o">=</span> <span class="n">dbus</span><span class="p">.</span><span class="n">Interface</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s">"org.freedesktop.DBus.Properties"</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">iface</span><span class="p">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"org.freedesktop.UDisks2.Drive"</span><span class="p">,</span> <span class="s">"ConnectionBus"</span><span class="p">)</span> <span class="o">==</span> <span class="s">"usb"</span><span class="p">,</span> <span class="n">iface</span><span class="p">)</span>

<span class="n">getAllUnixDevices</span><span class="p">()</span></code></pre></figure>

<p>AsÄ±l iÅŸi gÃ¶recek olan getAllUnixDevices olacak.Ä°lk olarak getAllUnixDevices Ã§alÄ±ÅŸÄ±r bu kodda. Bu kodlardaki deviceList fonksiyonu bize usb olsun olmasÄ±n hardiskinden tut CD sine usb sine kadar bÃ¼tÃ¼n device larÄ± elde eder(bÃ¼tÃ¼n device larÄ± bir anda listelemez,Sadece findUSBDevices fonksiyonuna daha kolay parametre vermek iÃ§in yazdÄ±m o fonksiyonu). findUSBDevices fonksiyonu, adÄ± Ã¼stÃ¼nde, deviceList fonksiyonundan elde edilen verileri kullanarak bize tuple veri tipi dÃ¶ner.tuple Ä±n 1. deÄŸeri usb ise True, deÄŸilse False deÄŸeri alÄ±r.tuple Ä±n 2. deÄŸeri parametre olarak verilen deÄŸerdir.Ama iÅŸimiz daha bitmemiÅŸtir.Bir de kullanÄ±cÄ±ya bunu uygun formatta gÃ¶stermek gerekiyor.Onu da getAllUnixDevices foksiyonu iÃ§inde zaten yapÄ±yorum.</p>

<p>Ã–yleyse ilk inceleyeceÄŸimiz kod parÃ§asÄ±, aÅŸaÄŸÄ±da</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="p">[...]</span>
<span class="k">def</span> <span class="nf">getAllUnixDevices</span><span class="p">():</span>
    <span class="n">busSession</span> <span class="o">=</span> <span class="n">dbus</span><span class="p">.</span><span class="n">SessionBus</span><span class="p">()</span>
    <span class="n">obj</span> <span class="o">=</span> <span class="n">busSession</span><span class="p">.</span><span class="n">get_object</span><span class="p">(</span><span class="s">"org.gtk.vfs.UDisks2VolumeMonitor"</span><span class="p">,</span> <span class="s">"/org/gtk/Private/RemoteVolumeMonitor"</span><span class="p">)</span>
    <span class="n">iface</span> <span class="o">=</span> <span class="n">dbus</span><span class="p">.</span><span class="n">Interface</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s">"org.gtk.Private.RemoteVolumeMonitor"</span><span class="p">)</span>
    <span class="n">_listdevice_</span> <span class="o">=</span> <span class="n">iface</span><span class="p">.</span><span class="n">List</span><span class="p">()</span>
    <span class="n">devices</span> <span class="o">=</span> <span class="p">[]</span>
<span class="p">[...]</span></code></pre></figure>

<p>Resimdeki List methodunu Ã§alÄ±ÅŸtÄ±rÄ±n.Ã–nÃ¼nÃ¼ze anlamsÄ±z sonuÃ§lar gelecek.Ã–yleyse bu sonuÃ§larÄ± anlamlÄ± bir ÅŸekle sokmamÄ±z lazÄ±m.Linux da usb girdiÄŸinde /devdizini altÄ±nda sdb, sdc gibi sembolik dosyalar oluÅŸur.Ä°ÅŸte bunlar block_device lardÄ±r.</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="p">[...]</span>
<span class="k">def</span> <span class="nf">getAllUnixDevices</span><span class="p">():</span>
    <span class="n">busSession</span> <span class="o">=</span> <span class="n">dbus</span><span class="p">.</span><span class="n">SessionBus</span><span class="p">()</span>
    <span class="n">obj</span> <span class="o">=</span> <span class="n">busSession</span><span class="p">.</span><span class="n">get_object</span><span class="p">(</span><span class="s">"org.gtk.vfs.UDisks2VolumeMonitor"</span><span class="p">,</span> <span class="s">"/org/gtk/Private/RemoteVolumeMonitor"</span><span class="p">)</span>
    <span class="n">iface</span> <span class="o">=</span> <span class="n">dbus</span><span class="p">.</span><span class="n">Interface</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s">"org.gtk.Private.RemoteVolumeMonitor"</span><span class="p">)</span>
    <span class="n">_listdevice_</span> <span class="o">=</span> <span class="n">iface</span><span class="p">.</span><span class="n">List</span><span class="p">()</span>
    <span class="n">devices</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">_listdevice_</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">i</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">j</span><span class="p">,</span> <span class="n">dbus</span><span class="p">.</span><span class="n">Dictionary</span><span class="p">):</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="c1">#FIXME How do is select USB devices better without third party?
</span>                    
                    <span class="n">path</span> <span class="o">=</span> <span class="n">deviceList</span><span class="p">(</span><span class="s">"/org/freedesktop/UDisks2/block_devices/"</span><span class="o">+</span><span class="n">j</span><span class="p">[</span><span class="s">"unix-device"</span><span class="p">].</span><span class="n">lstrip</span><span class="p">(</span><span class="s">"/dev/"</span><span class="p">))</span>
                    <span class="n">result</span> <span class="o">=</span> <span class="n">findUSBDevices</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
<span class="p">[...]</span></code></pre></figure>

<p>GÃ¶rdÃ¼ÄŸÃ¼nÃ¼z gibi bu anlamsÄ±z biÃ§imi ÅŸekle sokmak iÃ§in for dÃ¶ngÃ¼sÃ¼ kullandÄ±m.Ã–ncelikle _listdevice deÄŸiÅŸkeni bir liste veri tipidir.(AslÄ±nda Ã¶yle deÄŸil ama kafa karÄ±ÅŸÄ±klÄ±ÄŸÄ± olmasÄ±n) _liststore deÄŸiÅŸkeninin ilk deÄŸeri benim iÃ§in daha iy. Ã‡Ã¼nkÃ¼ sdb sdc gibi ifadeler o bÃ¶lÃ¼mde geÃ§iyor. sonra o i ifadesini de for dÃ¶ngÃ¼sÃ¼ne aldÄ±m.Ã‡Ã¼nkÃ¼ _liststore[0] dan gelen i deÄŸiÅŸkenini de list gibi olduÄŸu, ayrÄ±ca birden fazla device olduÄŸu iÃ§in bÃ¶yle yaptÄ±m. gÃ¶rdÃ¼ÄŸÃ¼nÃ¼z gibi Ã¶nce deviceList fonksiyonunu, sonra deviceList fonksiyonundan aldÄ±ÄŸÄ±m deÄŸiÅŸkeni findUSBDevices deÄŸiÅŸkenine vererek o device Ä±n usb olup olmadÄ±ÄŸÄ±nÄ± kontrol ettim.</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="p">[...]</span>
<span class="k">def</span> <span class="nf">getAllUnixDevices</span><span class="p">():</span>
    <span class="n">busSession</span> <span class="o">=</span> <span class="n">dbus</span><span class="p">.</span><span class="n">SessionBus</span><span class="p">()</span>
    <span class="n">obj</span> <span class="o">=</span> <span class="n">busSession</span><span class="p">.</span><span class="n">get_object</span><span class="p">(</span><span class="s">"org.gtk.vfs.UDisks2VolumeMonitor"</span><span class="p">,</span> <span class="s">"/org/gtk/Private/RemoteVolumeMonitor"</span><span class="p">)</span>
    <span class="n">iface</span> <span class="o">=</span> <span class="n">dbus</span><span class="p">.</span><span class="n">Interface</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s">"org.gtk.Private.RemoteVolumeMonitor"</span><span class="p">)</span>
    <span class="n">_listdevice_</span> <span class="o">=</span> <span class="n">iface</span><span class="p">.</span><span class="n">List</span><span class="p">()</span>
    <span class="n">devices</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">_listdevice_</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">i</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">j</span><span class="p">,</span> <span class="n">dbus</span><span class="p">.</span><span class="n">Dictionary</span><span class="p">):</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="c1">#FIXME How do is select USB devices better without third party?
</span>                    
                    <span class="n">path</span> <span class="o">=</span> <span class="n">deviceList</span><span class="p">(</span><span class="s">"/org/freedesktop/UDisks2/block_devices/"</span><span class="o">+</span><span class="n">j</span><span class="p">[</span><span class="s">"unix-device"</span><span class="p">].</span><span class="n">lstrip</span><span class="p">(</span><span class="s">"/dev/"</span><span class="p">))</span>
                    <span class="n">result</span> <span class="o">=</span> <span class="n">findUSBDevices</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
                        <span class="n">size</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">Get</span><span class="p">(</span><span class="s">"org.freedesktop.UDisks2.Drive"</span><span class="p">,</span> <span class="s">"Size"</span><span class="p">)</span>
                        <span class="k">if</span> <span class="n">size</span> <span class="o">&gt;=</span> <span class="mi">10</span><span class="o">**</span><span class="mi">12</span><span class="p">:</span>
                            <span class="n">size</span> <span class="o">=</span> <span class="s">"%.0fTB"</span> <span class="o">%</span> <span class="nb">round</span><span class="p">(</span><span class="n">size</span> <span class="o">/</span> <span class="mi">10</span><span class="o">**</span><span class="mi">12</span><span class="p">)</span>
                        <span class="k">elif</span> <span class="n">size</span> <span class="o">&gt;=</span> <span class="mi">10</span><span class="o">**</span><span class="mi">9</span><span class="p">:</span>
                            <span class="n">size</span> <span class="o">=</span> <span class="s">"%.0fGB"</span> <span class="o">%</span> <span class="nb">round</span><span class="p">(</span><span class="n">size</span> <span class="o">/</span> <span class="mi">10</span><span class="o">**</span><span class="mi">9</span><span class="p">)</span>
                        <span class="k">elif</span> <span class="n">size</span> <span class="o">&gt;=</span> <span class="mi">10</span><span class="o">**</span><span class="mi">6</span><span class="p">:</span>
                            <span class="n">size</span> <span class="o">=</span> <span class="s">"%.0fMB"</span> <span class="o">%</span> <span class="nb">round</span><span class="p">(</span><span class="n">size</span> <span class="o">/</span> <span class="mi">10</span><span class="o">**</span><span class="mi">6</span><span class="p">)</span>
                        <span class="k">elif</span> <span class="n">size</span> <span class="o">&gt;=</span> <span class="mi">10</span><span class="o">**</span><span class="mi">3</span><span class="p">:</span>
                            <span class="n">size</span> <span class="o">=</span> <span class="s">"%.0fkB"</span> <span class="o">%</span> <span class="nb">round</span><span class="p">(</span><span class="n">size</span> <span class="o">/</span> <span class="mi">10</span><span class="o">**</span><span class="mi">3</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">size</span> <span class="o">=</span> <span class="s">"%.0fB"</span> <span class="o">%</span> <span class="nb">round</span><span class="p">(</span><span class="n">size</span><span class="p">)</span>
                        <span class="n">devices</span><span class="p">.</span><span class="n">append</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">Get</span><span class="p">(</span><span class="s">"org.freedesktop.UDisks2.Drive"</span><span class="p">,</span> <span class="s">"Vendor"</span><span class="p">))</span><span class="o">+</span><span class="s">" "</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">Get</span><span class="p">(</span><span class="s">"org.freedesktop.UDisks2.Drive"</span><span class="p">,</span> <span class="s">"Model"</span><span class="p">))</span><span class="o">+</span><span class="s">" "</span><span class="o">+</span><span class="n">size</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">j</span><span class="p">[</span><span class="s">"unix-device"</span><span class="p">]),</span> <span class="n">result</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">Get</span><span class="p">(</span><span class="s">"org.freedesktop.UDisks2.Drive"</span><span class="p">,</span> <span class="s">"Size"</span><span class="p">)])</span>
                        
                <span class="k">except</span> <span class="nb">KeyError</span><span class="p">:</span>
                    <span class="k">pass</span>
    <span class="k">return</span> <span class="n">devices</span>
<span class="p">[...]</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="k">if</span> <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span></code></pre></figure>

<p>doÄŸruysa,yani o cihaz usb ise</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">size</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">Get</span><span class="p">(</span><span class="s">"org.freedesktop.UDisks2.Drive"</span><span class="p">,</span> <span class="s">"Size"</span><span class="p">)</span></code></pre></figure>

<p>kod parÃ§asÄ±yla o usb nin kaÃ§ gb, terabayt , mb olduÄŸunu bulmak iÃ§in bu kod parÃ§asÄ±ndan deÄŸer alÄ±yorum.Ama aldÄ±ÄŸÄ±m deÄŸer sadece usb nin kaÃ§ bayt olduÄŸunu veriyor.Bizim onu anlamlÄ± bir veriye dÃ¶nÃ¼ÅŸtÃ¼rmemiz lazÄ±m. if bloÄŸu iÃ§nde round ile deÄŸerleri yuvarlÄ±yorum.Yoksa biraz anlamsÄ±z oluyor.</p>

<p>En sonunda ise en baÅŸta oluÅŸturduÄŸum device adlÄ± listeye bu verileri ekliyorum.append ile kattÄ±ÄŸÄ±mÄ±z verileri de bir inceleyelim.</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="nb">str</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">Get</span><span class="p">(</span><span class="s">"org.freedesktop.UDisks2.Drive"</span><span class="p">,</span> <span class="s">"Vendor"</span><span class="p">))</span></code></pre></figure>

<p>CihazÄ±n vendorunu veriyor.Sandisk, Kingston vs.</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="nb">str</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">Get</span><span class="p">(</span><span class="s">"org.freedesktop.UDisks2.Drive"</span><span class="p">,</span> <span class="s">"Model"</span><span class="p">))</span></code></pre></figure>

<p>Burada o cihazÄ±n modelini bastÄ±rÄ±yorum.</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="nb">str</span><span class="p">(</span><span class="n">j</span><span class="p">[</span><span class="s">"unix-device"</span><span class="p">])</span></code></pre></figure>

<p>Bize usb iÃ§in /dev/ dizini altÄ±nda oluÅŸturulmuÅŸ sembolik dosya patikasÄ±nÄ± verir.</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">result</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">Get</span><span class="p">(</span><span class="s">"org.freedesktop.UDisks2.Drive"</span><span class="p">,</span> <span class="s">"Size"</span><span class="p">)</span></code></pre></figure>

<p>Bu da bize usb uzunluÄŸunu bayt cinsinden verir</p>

<p>AslÄ±nda bu scripti kendi projem iÃ§in yazmÄ±ÅŸtÄ±m ama baÅŸkalarÄ±na yararlÄ± olmak adÄ±na bu scripti anlatmak istedim.KafanÄ±za karÄ±ÅŸÄ±k gelen yerler olabilir.SÄ±kÄ±ntÄ± yapmayÄ±n.OlmadÄ± benle iletiÅŸime geÃ§in.</p>

<p>Sonraki yazÄ±larda gÃ¶rÃ¼ÅŸmek Ã¼zere â€¦</p>

<p><a href="../">&lt;â€“ geri</a></p>
:ET